/* ===========================
   UI.CSS — COMPONENTS LAYER
   Опирается на токены из colors.css и размеры из text.css
   Содержит: container/section/grid, navbar, hero, breadcrumb, card,
             chips/tags, event-date, input/search, pagination, footer
   =========================== */

:root{
  /* spacing scale */
  --space-1:.25rem; --space-2:.5rem; --space-3:.75rem; --space-4:1rem; 
  --space-6:1.5rem; --space-8:2rem; --space-10:2.5rem; --space-12:3rem;
}

/* Containers & layout helpers */
.container{ width:min(1100px, 100% - 2rem); margin-inline:auto; }
.section{ padding-block: var(--space-8); }
@media (min-width: 960px){ .section{ padding-block: var(--space-12);} }

.stack > * + *{ margin-top: var(--stack-space, 1rem); }

.grid{ display:grid; gap: var(--space-6); }
.grid-cards{ grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
.grid-2{ grid-template-columns: repeat(2, minmax(0,1fr)); }
.grid-3{ grid-template-columns: repeat(3, minmax(0,1fr)); }
@media (max-width: 720px){ .grid-2,.grid-3{ grid-template-columns: 1fr; } }

/* Navbar */
.navbar{
  position: sticky; top: 0; z-index: 40;
  background: var(--surface);
  border-bottom: 1px solid var(--border-color);
  backdrop-filter: blur(6px);
}
.navbar__inner{ display:flex; align-items:center; justify-content:space-between; gap:1rem; height:64px; }
.navbar__brand{ display:flex; align-items:center; gap:.6rem; font-weight:700; color:var(--brand); }
.navbar__menu{ display:flex; align-items:center; gap:1rem; }
.navbar__link{
  color: var(--text-secondary); font-weight:600;
  padding:.4rem .6rem; border-radius:10px; transition:background .15s ease, color .15s ease;
}
.navbar__link:hover{ color: var(--text-primary); background: color-mix(in oklab, var(--brand) 8%, transparent); }

/* Hero */
.hero{
  padding-block: clamp(2.5rem, 2rem + 2vw, 4rem);
  background: var(--surface);
  border-bottom: 1px solid var(--border-color);
}
.hero--gradient{ background: var(--surface); position:relative; overflow:hidden; }
.hero--gradient::before{
  content:""; position:absolute; inset:-10% -5% auto -5%; height: 60%;
  background: radial-gradient(50% 50% at 10% 20%, color-mix(in oklab, var(--accent) 30%, transparent), transparent 60%),
              radial-gradient(50% 50% at 90% 10%, color-mix(in oklab, var(--accent-burgundy) 22%, transparent), transparent 60%);
  pointer-events:none; z-index:0;
}
.hero__body{ position:relative; z-index:1; }

/* Breadcrumb */
.breadcrumb{ display:flex; flex-wrap:wrap; gap:.5rem; align-items:center; font-size:var(--text-sm); }
.breadcrumb a{ color:var(--text-secondary); border-bottom:none; }
.breadcrumb__sep{ opacity:.5; }

/* Card */
.card{
  background: var(--surface);
  border:1px solid var(--border-color);
  border-radius: var(--radius-lg);
  overflow:hidden;
  transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease;
}
.card:hover{ transform: translateY(-2px); box-shadow:
    0 10px 20px -12px rgba(18, 50, 120, .28),
    0 0 0 1px color-mix(in oklab, var(--brand) 18%, transparent);
  border-color: color-mix(in oklab, var(--brand) 35%, var(--border-color));
}
.card__media{ aspect-ratio: 16/9; background: var(--surface-alt); }
.card__media > img{ width:100%; height:100%; object-fit:cover; display:block; }
.card__body{ padding: 1rem 1.1rem; }
.card__footer{ padding: .8rem 1.1rem 1.1rem; display:flex; align-items:center; justify-content:space-between; gap:.5rem; }

/* News meta */
.meta{ display:flex; align-items:center; gap:.6rem; color:var(--text-secondary); font-size: var(--text-sm); }

/* Chips / tags */
.chips{ display:flex; flex-wrap:wrap; gap:.4rem; }
.chip{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:.25rem .55rem; border-radius:999px;
  font-weight:600; font-size:.82em; letter-spacing:.02em;
  background: color-mix(in oklab, var(--accent) 10%, var(--surface));
  color: var(--brand);
  border: 1px solid color-mix(in oklab, var(--brand) 35%, transparent);
}
.chip--burgundy{
  background: color-mix(in oklab, var(--accent-burgundy) 12%, var(--surface));
  color: var(--accent-burgundy);
  border-color: color-mix(in oklab, var(--accent-burgundy) 45%, transparent);
}

/* Event card add-ons */
.event-date{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  min-width:64px; padding:.5rem .4rem; border-radius:12px;
  background: color-mix(in oklab, var(--brand) 10%, var(--surface));
  border:1px solid color-mix(in oklab, var(--brand) 45%, transparent);
  text-align:center;
}
.event-date__day{ font-size:1.4rem; font-weight:800; line-height:1; color:var(--brand); }
.event-date__mon{ font-size:.8rem; text-transform:uppercase; letter-spacing:.12em; color:var(--text-secondary); }

/* Inputs / Search */
.input{
  width:100%; padding:.65rem .9rem; border-radius:12px;
  border:1px solid var(--border-color);
  background: var(--surface-alt); color: var(--text-primary);
  transition: border-color .15s ease, box-shadow .15s ease;
}
.input:focus{ outline:none; border-color: color-mix(in oklab, var(--brand) 50%, var(--border-color));
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand) 18%, transparent);
}
.input-group{ display:flex; gap:.5rem; align-items:center; }
.input-group .btn{ height: 42px; }

/* Pagination */
.pagination{ display:flex; align-items:center; gap:.5rem; justify-content:center; flex-wrap:wrap; }
.page{
  display:inline-flex; align-items:center; justify-content:center; min-width:40px; height:40px;
  padding:0 .5rem; border-radius:12px; border:1px solid var(--border-color);
  background: var(--surface); color: var(--text-primary); font-weight:600;
  transition: background .15s ease, border-color .15s ease, color .15s ease;
}
.page[aria-current="page"], .page.is-active{
  background: color-mix(in oklab, var(--brand) 10%, var(--surface));
  border-color: color-mix(in oklab, var(--brand) 55%, var(--border-color));
  color: var(--brand);
}

/* Footer */
.footer{
  border-top:1px solid var(--border-color);
  background: var(--surface);
  padding-block: var(--space-8);
}
.footer__grid{ display:grid; gap: var(--space-6); grid-template-columns: repeat(auto-fit, minmax(220px,1fr)); }
.footer a{ border-bottom:none; color: var(--text-secondary); }
.footer a:hover{ color: var(--text-primary); }

/* Utilities extras */
.round-lg{ border-radius: var(--radius-lg); }
.center{ text-align:center; }
.max-w-prose{ max-width: 65ch; }

/* ==== NAV: dropdowns via <details class="menu-drop"> ==== */

.navbar__menu{
  display:flex; align-items:center; gap:.5rem 1rem; flex-wrap:wrap;
}

/* сам "дроп" */
.menu-drop{ position: relative; }
.menu-drop > summary{
  list-style: none; cursor: pointer;
  display: inline-flex; align-items:center; gap:.35rem;
  padding:.4rem .6rem; border-radius:10px;
  color: var(--text-secondary); font-weight:600;
  transition: background .15s ease, color .15s ease;
}
.menu-drop > summary::-webkit-details-marker{ display:none; }

/* стрелочка */
.menu-drop > summary::after{
  content:"";
  width: 8px; height: 8px;
  border-right: 2px solid currentColor;
  border-bottom: 2px solid currentColor;
  transform: rotate(45deg); translate: 0 -1px;
  opacity:.7; transition: transform .15s ease, opacity .15s ease;
}
.menu-drop[open] > summary::after{
  transform: rotate(-135deg); opacity:1;
}

/* hover/active */
.menu-drop > summary:hover,
.navbar__link:hover{
  color: var(--text-primary);
  background: color-mix(in oklab, var(--brand) 8%, transparent);
}

/* сама панель */
.menu-drop > ul{
  position: absolute; inset: auto auto auto 0; top: calc(100% + .5rem);
  z-index: 50;
  min-width: 220px; padding: .6rem;
  display: grid; gap: .25rem;
  background: var(--surface);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  box-shadow:
    0 14px 28px -16px rgba(18,50,120,.35),
    0 0 0 1px color-mix(in oklab, var(--brand) 15%, transparent);
}
.menu-drop:not([open]) > ul{ display:none; }

/* ссылки в панели */
.menu-drop > ul .navbar__link{
  display:block; width:100%;
  color: var(--text-secondary);
  padding:.45rem .55rem; border-radius:8px;
}
.menu-drop > ul .navbar__link:hover{
  color: var(--text-primary);
  background: color-mix(in oklab, var(--brand) 10%, var(--surface));
}

/* фокус-доступность */
.navbar__link:focus-visible,
.menu-drop > summary:focus-visible,
.menu-drop > ul .navbar__link:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand) 22%, transparent);
  border-radius:10px;
}

/* ====== Мобильная адаптация (<= 880px): меню как аккордеон ====== */
@media (max-width: 880px){
  .navbar__menu{ gap:.25rem .5rem; }
  .menu-drop{ width: max-content; }
  .menu-drop > ul{
    position: static; inset: auto; top: auto;
    min-width: 200px; margin-top:.4rem;
    box-shadow:none;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    background: var(--surface-alt);
  }
}
/* Nivo slider container polish (без лома логики) */
#wrap-slider{ border-radius: var(--radius-lg); overflow:hidden; }
#wrap-slider .nivoSlider{ border-radius: inherit; }
#wrap-slider .nivo-controlNav a{ 
  background: color-mix(in oklab, var(--brand) 15%, var(--surface));
  border-radius: 999px;
}
#wrap-slider .nivo-controlNav a.active{
  background: var(--brand);
}
/* плавные трансишны ссылок (везде) */
a{ transition: color .15s ease, border-color .15s ease, background .15s ease; }

/* visually hidden для a11y-текстов при необходимости */
.visually-hidden{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}
